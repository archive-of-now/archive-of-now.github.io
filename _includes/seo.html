{%- comment -%}
Archive of Now â€” SEO include (hybrid mode)
Author control: local preprocessing of SEO variables, rendered by jekyll-seo-tag.
Requires `jekyll-seo-tag` in _config.yml plugins list.

Usage:
  {% include seo.html %}
{%- endcomment -%}

{%- unless site.locale -%}
  {%- assign site.locale = "en_US" -%}
{%- endunless -%}

{%- assign is_index = page.name == "index.md" or page.name == "index.html" -%}
{%- assign page.seo_type = page.seo.type | default: (is_index and "website" or "article") -%}

{%- assign page.seo_title = page.title | default: site.title -%}
{%- assign page.seo_description = page.description | default: page.excerpt | default: site.description -%}

{%- if site.authors -%}
  {%- assign page.seo_author = site.authors | join: ", " -%}
{%- else -%}
  {%- assign page.seo_author = site.author.name | default: site.title -%}
{%- endif -%}

{%- assign page.seo_image = page.image | default: site.image | default: '/assets/favicon.svg' -%}

{%- comment -%}Merge & deduplicate keyword sources{%- endcomment -%}
{%- assign keyword_list = page.keywords | default: [] | compact -%}
{%- assign tag_list = page.tags | default: [] | compact -%}
{%- assign page.keywords = keyword_list | concat: tag_list | uniq | join: ", " -%}

{% seo %}
